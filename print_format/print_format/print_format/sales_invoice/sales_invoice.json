{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-11-20 20:34:17.078745",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- PDF Margins - Meta Tags for wkhtmltopdf -->\n<meta name=\"margin-top\" content=\"5mm\">\n<meta name=\"margin-bottom\" content=\"5mm\">\n<meta name=\"margin-left\" content=\"5mm\">\n<meta name=\"margin-right\" content=\"5mm\">\n\n\n<!-- Letterhead -->\n<div style=\"height:5px;\"></div>\n<div style=\"width:100%; text-align:center; margin:0 0 5px 0;\">\n  <img src=\"/files/company.png\" alt=\"Letterhead\" style=\"max-width:100%; height:auto; display:block; margin:0 auto;\">\n</div>\n\n<!-- Heading -->\n<div style=\"height:5px;\"></div>\n\n<div style=\"width:100%;max-width:100%;margin:0 0 5px 0;padding:0;background:#fff;font-family:'Cairo',Tahoma,Arial,sans-serif;box-sizing:border-box;box-shadow:0 1px 3px rgba(255,182,49,0.09);direction:rtl;overflow:hidden;\">\n  <div style=\"display:flex;justify-content:center;align-items:center;padding:4px 10px;line-height:1;text-align:center;white-space:nowrap;font-weight:bold;color:#000;font-size:1.4em;letter-spacing:.5px;\">\n    {% set invoice_type = \"Simplified\" %}\n    {% if doc.custom_zatca_siaf %}\n        {% set buyer_vat = frappe.db.get_value(\"Sales Invoice Additional Fields\", doc.custom_zatca_siaf, \"buyer_vat_registration_number\") %}\n        {% if buyer_vat %}\n            {% set invoice_type = \"Standard\" %}\n        {% endif %}\n    {% endif %}\n    {% if invoice_type == \"Standard\" %}\n        {% if doc.is_return %}\u0625\u0634\u0639\u0627\u0631 \u062f\u0627\u0626\u0646 \u0636\u0631\u064a\u0628\u064a \u0642\u064a\u0627\u0633\u064a{% elif doc.is_debit_note %}\u0625\u0634\u0639\u0627\u0631 \u0645\u062f\u064a\u0646 \u0636\u0631\u064a\u0628\u064a \u0642\u064a\u0627\u0633\u064a{% else %}\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0642\u064a\u0627\u0633\u064a\u0629{% endif %}\n    {% else %}\n        {% if doc.is_return %}\u0625\u0634\u0639\u0627\u0631 \u062f\u0627\u0626\u0646 \u0636\u0631\u064a\u0628\u064a \u0645\u0628\u0633\u0637{% elif doc.is_debit_note %}\u0625\u0634\u0639\u0627\u0631 \u0645\u062f\u064a\u0646 \u0636\u0631\u064a\u0628\u064a \u0645\u0628\u0633\u0637{% else %}\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0645\u0628\u0633\u0637\u0629{% endif %}\n    {% endif %}\n  </div>\n</div>\n\n<!-- Customer Info -->\n<div style=\"border:1.5pt solid #000; border-radius:8pt; background:#fff; width:100%; margin:0 0 2pt 0; padding:0; font-family:'Cairo',Tahoma,Arial,sans-serif; direction:rtl; box-sizing:border-box;\">\n  <table style=\"width:100%; border-collapse:collapse; margin:0; padding:0; line-height:1.1; font-family:'Cairo',Tahoma,Arial,sans-serif; table-layout:auto;\">\n    <tbody>\n      {% set customer_doc = frappe.get_doc(\"Customer\", doc.customer) %}\n\n      <tr style=\"font-size:10pt; line-height:1.1; white-space:nowrap;\">\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">{{ doc.customer_name or \"\" }}</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">{{ doc.name }}</td>\n      </tr>\n      \n      {% set address_name = frappe.db.get_value(\"Dynamic Link\", {\"link_doctype\": \"Customer\", \"link_name\": doc.customer}, \"parent\") %}\n      {% set address_line2 = \"\" %}{% set custom_area = \"\" %}{% set address_line1 = \"\" %}{% set city = \"\" %}{% set pincode = \"\" %}\n      {% if address_name %}\n        {% set address_values = frappe.db.get_value(\"Address\", address_name, [\"address_line2\",\"custom_area\",\"address_line1\",\"city\",\"pincode\"]) %}\n        {% if address_values %}\n          {% set address_line2 = address_values[0] %}{% set custom_area = address_values[1] %}{% set address_line1 = address_values[2] %}{% set city = address_values[3] %}{% set pincode = address_values[4] %}\n        {% endif %}\n      {% endif %}\n      <tr style=\"font-size:10pt; line-height:1.1; white-space:nowrap;\">\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u0627\u0644\u0639\u0646\u0648\u0627\u0646</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">\n          {% set address_parts = [] %}\n          {% if address_line2 %}{% set _ = address_parts.append(address_line2) %}{% endif %}\n          {% if custom_area %}{% set _ = address_parts.append(custom_area) %}{% endif %}\n          {% if address_line1 %}{% set _ = address_parts.append(address_line1) %}{% endif %}\n          {% if city %}{% set _ = address_parts.append(city) %}{% endif %}\n          {{ address_parts | join(', ') }}\n        </td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">\n          {% set days_ar = ['\u0627\u0644\u0627\u062b\u0646\u064a\u0646','\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621','\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621','\u0627\u0644\u062e\u0645\u064a\u0633','\u0627\u0644\u062c\u0645\u0639\u0629','\u0627\u0644\u0633\u0628\u062a','\u0627\u0644\u0623\u062d\u062f'] %}\n          {% set dt = frappe.utils.get_datetime(doc.posting_date) %}\n          {% set weekday = dt.weekday() %}\n          {{ days_ar[weekday] }} {{ \"%02d\"|format(dt.day) }}-{{ \"%02d\"|format(dt.month) }}-{{ dt.year }}\n        </td>\n      </tr>\n\n      <tr style=\"font-size:10pt; line-height:1.1; white-space:nowrap;\">\n        {% if customer_doc.custom_vat_registration_number %}\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">{{ customer_doc.custom_vat_registration_number }}</td>\n        {% else %}\n        <td style=\"border:none; width:15%; vertical-align:middle;\"></td>\n        <td style=\"border:none; width:35%; vertical-align:middle;\"></td>\n        {% endif %}\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u0648\u0642\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">\n          {% if doc.posting_time %}\n            {% set dt_time = frappe.utils.get_datetime(doc.posting_date ~ ' ' ~ doc.posting_time) %}\n            {% set hour = dt_time.hour %}\n            {% set minute = dt_time.minute %}\n            {% set hour12 = hour if 1 <= hour <= 12 else (hour - 12 if hour > 12 else 12) %}\n            {% set am_pm_ar = '\u0635' if hour < 12 else '\u0645' %}\n            {{ hour12 }}:{{ \"%02d\"|format(minute) }} {{ am_pm_ar }}\n          {% else %}\n            {% set dt_time = frappe.utils.get_datetime(doc.posting_date) %}\n            {% set hour = dt_time.hour %}\n            {% set minute = dt_time.minute %}\n            {% set hour12 = hour if 1 <= hour <= 12 else (hour - 12 if hour > 12 else 12) %}\n            {% set am_pm_ar = '\u0635' if hour < 12 else '\u0645' %}\n            {{ hour12 }}:{{ \"%02d\"|format(minute) }} {{ am_pm_ar }}\n          {% endif %}\n        </td>\n      </tr>\n      \n      {% set type_ar = {\n        \"Tax Identification Number\": [\"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a\"],\n        \"Commercial Registration Number\": [\"\u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a\"],\n        \"MOMRAH License\": [\"\u0631\u062e\u0635\u0629 \u0648\u0632\u0627\u0631\u0629 \u0627\u0644\u0634\u0624\u0648\u0646 \u0627\u0644\u0628\u0644\u062f\u064a\u0629 \u0648\u0627\u0644\u0642\u0631\u0648\u064a\u0629 \u0648\u0627\u0644\u0625\u0633\u0643\u0627\u0646\"],\n        \"MHRSD License\": [\"\u0631\u062e\u0635\u0629 \u0648\u0632\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u0631\u062f \u0627\u0644\u0628\u0634\u0631\u064a\u0629 \u0648\u0627\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629\"],\n        \"700 Number\": [\"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0645\u0648\u062d\u062f\"],\n        \"MISA License\": [\"\u0631\u062e\u0635\u0629 \u0648\u0632\u0627\u0631\u0629 \u0627\u0644\u0627\u0633\u062a\u062b\u0645\u0627\u0631\"],\n        \"National ID\": [\"\u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629\"],\n        \"GCC ID\": [\"\u0647\u0648\u064a\u0629 \u0645\u062c\u0644\u0633 \u0627\u0644\u062a\u0639\u0627\u0648\u0646\"],\n        \"Iqama\": [\"\u0631\u0642\u0645 \u0627\u0644\u0625\u0642\u0627\u0645\u0629\"],\n        \"Passport ID\": [\"\u0631\u0642\u0645 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631\"],\n        \"Other OD\": [\"\u0623\u062e\u0631\u0649\"]\n      } %}\n      {% for row in customer_doc.custom_additional_ids %}\n        {% if row.value %}\n        <tr style=\"font-size:10pt; line-height:1.1; white-space:nowrap;\">\n          <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">{{ type_ar.get(row.type_name, [row.type_name])[0] }}</td>\n          <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">{{ row.value }}</td>\n          {% if loop.index == 2 %}\n            <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642</td>\n            <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">\n              {% if doc.due_date %}\n                {% set due_dt = frappe.utils.get_datetime(doc.due_date) %}\n                {% set due_weekday = due_dt.weekday() %}\n                {{ days_ar[due_weekday] }} {{ \"%02d\"|format(due_dt.day) }}-{{ \"%02d\"|format(due_dt.month) }}-{{ due_dt.year }}\n              {% endif %}\n            </td>\n          {% else %}\n            <td style=\"border:none; width:15%; vertical-align:middle;\"></td><td style=\"border:none; width:35%; vertical-align:middle;\"></td>\n          {% endif %}\n        </tr>\n        {% endif %}\n      {% endfor %}\n\n      {% if not customer_doc.custom_additional_ids or customer_doc.custom_additional_ids|length == 0 %}\n      <tr style=\"font-size:10pt; line-height:1.1; white-space:nowrap;\">\n        <td style=\"border:none; width:15%; vertical-align:middle;\"></td><td style=\"border:none; width:35%; vertical-align:middle;\"></td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; font-weight:bold; width:15%; white-space:nowrap; vertical-align:middle;\">\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642</td>\n        <td style=\"border:none; padding:1pt; color:#111; text-align:right; width:35%; white-space:nowrap; vertical-align:middle;\">\n          {% if doc.due_date %}\n            {% set due_dt = frappe.utils.get_datetime(doc.due_date) %}\n            {% set due_weekday = due_dt.weekday() %}\n            {{ days_ar[due_weekday] }} {{ \"%02d\"|format(due_dt.day) }}-{{ \"%02d\"|format(due_dt.month) }}-{{ due_dt.year }}\n          {% endif %}\n        </td>\n      </tr>\n      {% endif %}\n    </tbody>\n  </table>\n</div>\n\n<!-- Items Table -->\n<div style=\"border: 2px solid #000; border-radius: 8px; overflow: hidden; direction: rtl; font-family: 'Cairo', Tahoma, Arial, sans-serif;\">\n  <table style=\"width: 100%; border-collapse: collapse; font-size: 14px;\">\n    <thead>\n      <tr style=\"border-bottom: 2px solid #666;\">\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: center; width: 30px; vertical-align:middle;\">\u0645</th>\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: center; border-left: 1px solid #ccc; width: 80px; vertical-align:middle;\">\u0627\u0644\u0643\u0648\u062f</th>\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: right; border-left: 1px solid #ccc; vertical-align:middle;\">\u0627\u0644\u0635\u0646\u0641</th>\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: center; border-left: 1px solid #ccc; width: 60px; vertical-align:middle;\">\u0627\u0644\u0648\u062d\u062f\u0629</th>\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: center; border-left: 1px solid #ccc; width: 70px; vertical-align:middle;\">\u0627\u0644\u0643\u0645\u064a\u0629</th>\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: center; border-left: 1px solid #ccc; width: 80px; vertical-align:middle;\">\u0627\u0644\u0633\u0639\u0631</th>\n        <th style=\"background: #eee; padding: 10px 6px; font-weight: bold; text-align: center; border-left: 1px solid #ccc; width: 100px; vertical-align:middle;\">\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% for row in doc.items %}\n        {% set row_style = \"\" %}\n        {% if loop.index % 2 == 0 %}\n          {% set row_style = row_style + \"background: #f9f9f9; \" %}\n        {% endif %}\n        {% if not loop.last %}\n          {% set row_style = row_style + \"border-bottom: 1px dotted #aaa; \" %}\n        {% endif %}\n        <tr{% if row_style %} style=\"{{ row_style|trim }}\"{% endif %}>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: center; width: 30px;\">{{ loop.index }}</td>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: center; width: 80px;\">{{ row.item_code }}</td>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: right;\">{{ row.description }}</td>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: center; width: 60px;\">{{ row.uom }}</td>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: center; width: 70px;\">{{ \"{:,.2f}\".format(row.qty or 0) }}</td>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: center; direction: ltr; width: 80px;\">\n            {{ \"{:,.2f}\".format(row.net_rate or 0) }}\n          </td>\n          <td style=\"padding: 7px 5px; font-size: 0.9em; vertical-align: middle; text-align: center; direction: ltr; width: 100px;\">\n            {{ \"{:,.2f}\".format(row.net_amount or 0) }}\n          </td>\n        </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n\n<!-- Totals and QR Code (Two Columns) - Fixed LTR Layout -->\n<div dir=\"ltr\" style=\"direction: ltr; unicode-bidi: embed; width: 100%; margin-top: 10px; margin-bottom: 10px;\">\n  <table style=\"width:100%; border-collapse:collapse; direction: ltr;\">\n    <tr>\n      <!-- Totals Column - Always Left -->\n      <td style=\"width:300px; vertical-align:middle; padding-right:10px; direction: rtl; text-align: right;\">\n        <div style=\"margin:3px 0 0 0; border:1px solid #000; border-radius:8px; overflow:hidden; background:transparent; direction:rtl; font-family:'Arial',sans-serif; page-break-inside:avoid; unicode-bidi: embed; display: block;\">\n      <table style=\"width:100%; border-collapse:collapse; font-size:15px; margin:0; padding:0; line-height:1;\">\n        <tbody>\n          <tr>\n            <th style=\"margin:0; padding:7px 5px; line-height:1; vertical-align:middle; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; text-align:right; direction:rtl; display:table-cell;\">\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u063a\u064a\u0631 \u0634\u0627\u0645\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u0629</th>\n            <td dir=\"ltr\" style=\"margin:0; padding:7px 5px; line-height:1; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; direction:ltr; white-space:nowrap; font-variant-numeric:tabular-nums; vertical-align:middle; display:table-cell; text-align:left;\">\n              {{ frappe.utils.fmt_money(doc.net_total, currency=doc.currency) | safe }}\n            </td>\n          </tr>\n          <tr>\n            <th style=\"margin:0; padding:7px 5px; line-height:1; vertical-align:middle; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; text-align:right; direction:rtl; display:table-cell;\">\u0645\u062c\u0645\u0648\u0639 \u0642\u064a\u0645\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629</th>\n            <td dir=\"ltr\" style=\"margin:0; padding:7px 5px; line-height:1; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; direction:ltr; white-space:nowrap; font-variant-numeric:tabular-nums; vertical-align:middle; display:table-cell; text-align:left;\">\n              {{ frappe.utils.fmt_money(doc.total_taxes_and_charges, currency=doc.currency) | safe }}\n            </td>\n          </tr>\n          <tr>\n            <th style=\"margin:0; padding:7px 5px; line-height:1; vertical-align:middle; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; text-align:right; direction:rtl; display:table-cell;\">\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0634\u0627\u0645\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u0629</th>\n            <td dir=\"ltr\" style=\"margin:0; padding:7px 5px; line-height:1; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; direction:ltr; white-space:nowrap; font-variant-numeric:tabular-nums; vertical-align:middle; display:table-cell; text-align:left;\">\n              {{ frappe.utils.fmt_money(doc.grand_total, currency=doc.currency) | safe }}\n            </td>\n          </tr>\n\n          {% set payment_entries = frappe.get_all(\"Payment Entry Reference\", filters={\"reference_doctype\": \"Sales Invoice\", \"reference_name\": doc.name}, fields=[\"parent\", \"allocated_amount\"]) %}\n          {% set submitted_payments = [] %}\n          {% for ref in payment_entries %}\n            {% set pe_docstatus = frappe.db.get_value(\"Payment Entry\", ref.parent, \"docstatus\") %}\n            {% if pe_docstatus == 1 %}\n              {% set pe_paid_to = frappe.db.get_value(\"Payment Entry\", ref.parent, \"paid_to\") %}\n              {% set _ = submitted_payments.append({\"name\": ref.parent, \"paid_to\": pe_paid_to, \"paid_amount\": ref.allocated_amount}) %}\n            {% endif %}\n          {% endfor %}\n          {% if submitted_payments %}\n            {% for entry in submitted_payments %}\n            <tr>\n              <th style=\"margin:0; padding:7px 5px; line-height:1; vertical-align:middle; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; text-align:right; direction:rtl; display:table-cell;\">\n                \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062d\u0635\u0644\n                <span style=\"display:inline-block; font-size:0.7em; font-weight:normal; color:#555; margin:0; margin-right:4px; white-space:nowrap;\">( \u0625\u0630\u0646 \u0625\u0633\u062a\u0644\u0627\u0645 {{ entry.name }} )</span>\n              </th>\n              <td dir=\"ltr\" style=\"margin:0; padding:7px 5px; line-height:1; border-bottom:1px solid #ddd; border-top:none; border-left:none; border-right:none; font-weight:bold; direction:ltr; white-space:nowrap; font-variant-numeric:tabular-nums; vertical-align:middle; display:table-cell; text-align:left;\">\n                {{ frappe.utils.fmt_money(entry.paid_amount, currency=doc.currency) | safe }}\n              </td>\n            </tr>\n            {% endfor %}\n            <tr>\n              <th style=\"margin:0; padding:7px 5px; line-height:1; vertical-align:middle; border-bottom:1px solid #ddd; border-top:1px solid #bbb; border-left:none; border-right:none; font-weight:bold; text-align:right; direction:rtl; display:table-cell;\">\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u062d\u0635\u0644\u0629</th>\n              <td dir=\"ltr\" style=\"margin:0; padding:7px 5px; line-height:1; border-bottom:1px solid #ddd; border-top:1px solid #bbb; border-left:none; border-right:none; font-weight:bold; direction:ltr; white-space:nowrap; font-variant-numeric:tabular-nums; vertical-align:middle; display:table-cell; text-align:left;\">\n                {{ frappe.utils.fmt_money(submitted_payments | map(attribute='paid_amount') | sum, currency=doc.currency) | safe }}\n              </td>\n            </tr>\n          {% endif %}\n\n          <tr>\n            <th style=\"margin:0; padding:7px 5px; line-height:1; vertical-align:middle; border-bottom:2px solid #000; border-top:none; border-left:none; border-right:none; font-weight:bold; text-align:right; direction:rtl; display:table-cell;\">\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a</th>\n            <td dir=\"ltr\" style=\"margin:0; padding:7px 5px; line-height:1; border-bottom:2px solid #000; border-top:none; border-left:none; border-right:none; font-weight:bold; direction:ltr; white-space:nowrap; font-variant-numeric:tabular-nums; vertical-align:middle; display:table-cell; text-align:left;\">\n              {{ frappe.utils.fmt_money(doc.outstanding_amount, currency=doc.currency) | safe }}\n            </td>\n          </tr>\n\n          <tr>\n            <td colspan=\"2\" style=\"margin:0; padding:7px 5px; font-size:16px; line-height:1.4; font-weight:bold; text-align:center; color:#222; border:none; word-wrap:break-word; white-space:normal; overflow-wrap:break-word;\">\n              {{ doc.custom_tafqeet_amount }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n      </td>\n      \n      <!-- QR Code Column - Always Right -->\n      <td style=\"width:200px; vertical-align:middle; padding-left:10px; direction: ltr; text-align: right;\">\n        <div style=\"margin: 2px 0 60px 0; text-align: right; direction: ltr; unicode-bidi: embed; display: block;\">\n          {% if doc.custom_qr_image_src %}\n            <img src=\"{{ doc.custom_qr_image_src | safe }}\" alt=\"QR Code\" style=\"width: 180px; height: 180px; object-fit: contain; display: block; margin-left: auto;\">\n          {% else %}\n            <div style=\"width: 180px; height: 180px; border: 2px solid #ccc; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-left: auto; background-color: #f9f9f9; direction: rtl; text-align: center; padding: 10px; box-sizing: border-box;\">\n              <span style=\"font-family: 'Cairo', Arial, sans-serif; font-size: 14px; color: #666; font-weight: bold; line-height: 1.4;\">\u0644\u0645 \u064a\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0631\u0645\u0632</span>\n            </div>\n          {% endif %}\n        </div>\n      </td>\n    </tr>\n  </table>\n</div>\n\n<!-- Signatures - Moved to bottom, PDF compatible -->\n<div style=\"width:100%; margin-top:30px; margin-bottom:10px; overflow:hidden; background:#fff; font-family:'Cairo', Tahoma, Arial, sans-serif; line-height:1; border:none; padding:10px 0; page-break-inside:avoid;\">\n  <table style=\"width:100%; border:none; background:none; border-spacing:0; direction:rtl; line-height:1; margin:0; padding:0;\">\n    <tbody>\n      <tr>\n        <td style=\"font-family:'Cairo', Arial, sans-serif; font-size:0.92em; padding:5px; vertical-align:middle; color:#222; font-weight:700; letter-spacing:0.1px; text-align:center; border:none; width:50%;\">\n          \u0627\u0644\u0628\u0627\u0626\u0639\n        </td>\n        <td style=\"font-family:'Cairo', Arial, sans-serif; font-size:0.92em; padding:5px; vertical-align:middle; color:#222; font-weight:700; letter-spacing:0.1px; text-align:center; border:none; width:50%;\">\n          \u0627\u0644\u0645\u0633\u062a\u0644\u0645\n        </td>\n      </tr>\n      <tr>\n        <td style=\"font-family:'Cairo', Arial, sans-serif; font-size:0.92em; vertical-align:middle; color:#222; font-weight:700; letter-spacing:0.1px; text-align:center; border:none; height:30px; padding:5px 5px 0 5px;\"></td>\n        <td style=\"font-family:'Cairo', Arial, sans-serif; font-size:0.92em; vertical-align:middle; color:#222; font-weight:700; letter-spacing:0.1px; text-align:center; border:none; height:30px; padding:5px 5px 0 5px;\"></td>\n      </tr>\n      <tr>\n        <td style=\"font-family:'Cairo', Arial, sans-serif; font-size:0.92em; padding:0 5px; vertical-align:middle; color:#222; font-weight:700; letter-spacing:0.1px; text-align:center; border:none; height:1px;\">\n          <div style=\"width:150px; margin:0 auto; border-top:2px dotted #000;\"></div>\n        </td>\n        <td style=\"font-family:'Cairo', Arial, sans-serif; font-size:0.92em; padding:0 5px; vertical-align:middle; color:#222; font-weight:700; letter-spacing:0.1px; text-align:center; border:none; height:1px;\">\n          <div style=\"width:150px; margin:0 auto; border-top:2px dotted #000;\"></div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n\n<!-- Footer from Letter Head -->\n{% if footer %}\n{{ footer | safe }}\n{% endif %}\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-11-25 13:35:06.514101",
 "modified_by": "Administrator",
 "module": "Print Format",
 "name": "sales_invoice",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}